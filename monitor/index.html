<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
	</head>
	<body>
	<script>
		window.WebSocket = window.WebSocket || window.MozWebSocket;
		var connection = new WebSocket('ws://127.0.0.1:1337');
		var out;
		
		window.onload = function() {
			out = document.getElementById("out");
		};
			
		connection.onopen = function () {
			
		};
		
		connection.onerror = function (error) {
			
		};
		
		connection.onmessage = function (message) {
			var json = JSON.parse(message.data);
			if (json == "test")
			{
				alert("Test!");
			}
			
			switch(json.type)
			{
				case "routingTable":
					console.log(json.name);
				break;
			}
			
		};
		
		setInterval(function() {
			if (connection.readyState !== 1)
			{
				//Boom
			}
		}, 3000);
		
		//connection.send(msg);
		
		function test() {
			connection.send('{"command":"test"}');
		}
		
		function getAllNames() {
			connection.send('{"command":"getAll"}');
		}
		
	</script>
		<button onclick="test()" >TEST</button>
		<button onclick="getAllNames()" >Wszyscy</button>
		<br/>
		<div id="out" ></div>
	</body>
</html>